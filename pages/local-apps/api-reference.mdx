---
title: "REST API Reference"
description: "Public REST API documentation for RealTimeX Local Apps"
---

import { Callout } from 'nextra/components'

# REST API Reference

RealTimeX provides a set of public REST API endpoints for building custom integrations when an official SDK is not available or not suitable for your environment.

Base URL: `http://localhost:3001/`

## Authentication (v1.0.8+)

All SDK API endpoints require the `x-app-id` header for authentication. This header identifies your Local App and is used to verify permissions.

### Required Header

```http
X-App-Id: your-local-app-uuid
```

<Callout type="info">
When using the official SDK, this header is set automatically from the `RTX_APP_ID` environment variable injected by RealTimeX when starting your app.
</Callout>

### Error Responses

**Missing Header (401):**
```json
{
  "success": false,
  "error": "Missing required header: x-app-id",
  "code": "MISSING_APP_ID"
}
```

**Invalid App ID (401):**
```json
{
  "success": false,
  "error": "Invalid app ID: <app-id>",
  "code": "INVALID_APP_ID"
}
```

---

## Permissions

Each API endpoint requires specific permissions. Permissions are declared in the SDK manifest and requested from the user.

### Permission States
1.  **Upfront Prompt**: The SDK declares needed permissions in the constructor. RealTimeX prompts for all missing permissions on app launch.
2.  **Runtime Prompt**: If an API is called without a pre-granted permission, the SDK triggers a native dialog and retries the call automatically.

| Permission | Required For |
|------------|-------------|
| `api.agents` | `GET /agents` |
| `api.workspaces` | `GET /workspaces` |
| `api.threads` | `GET /workspaces/:slug/threads` |
| `api.task` | `GET /task/:uuid` |
| `webhook.trigger` | `POST /webhooks/realtimex` |
| `activities.read` | `GET /activities` |
| `activities.write` | `POST /activities`, `PATCH /activities/:id`, `DELETE /activities/:id` |

---

## SDK Endpoints


These endpoints are used by the official SDKs to coordinate with the RealTimeX Main App.

### POST `/webhooks/realtimex`

Unified webhook receiver for SDK. Supports multiple event types.

#### Event: `trigger-agent`

Create a calendar event and optionally trigger an agent.

**Request:**
```json
{
  "app_id": "uuid",
  "app_name": "My App",
  "event": "trigger-agent",
  "payload": {
    "raw_data": { "type": "order", "amount": 100 },
    "auto_run": true,
    "agent_name": "order-processor",
    "workspace_slug": "operations",
    "thread_slug": "general",
    "prompt": "Process this order"
  }
}
```

**Response (200):**
```json
{
  "success": true,
  "task_uuid": "abc-123",
  "calendar_event_uuid": "def-456",
  "auto_run": true,
  "message": "Agent triggered"
}
```

---

#### Event: `task-start`

Mark a task as processing. Used by agents before starting work.

**Request:**
```json
{
  "event": "task-start",
  "payload": {
    "task_uuid": "abc-123",
    "machine_id": "agent-001"
  }
}
```

**Response:** `{ "success": true, "status": "processing" }`

---

#### Event: `task-complete`

Mark a task as completed with result data.

**Request:**
```json
{
  "event": "task-complete",
  "payload": {
    "task_uuid": "abc-123",
    "machine_id": "agent-001",
    "result": { "summary": "Order processed", "data": {...} }
  }
}
```

**Response:** `{ "success": true, "status": "completed" }`

---

#### Event: `task-fail`

Mark a task as failed with error message.

**Request:**
```json
{
  "event": "task-fail",
  "payload": {
    "task_uuid": "abc-123",
    "machine_id": "agent-001",
    "error": "Connection timeout to external API"
  }
}
```

**Response:** `{ "success": true, "status": "failed" }`

---

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `app_id` | string | No | Local App UUID (from Main App) |
| `app_name` | string | No | Display name for calendar events |
| `event` | string | Yes | Event type (see above) |
| `payload` | object | Yes | Event-specific payload |


---

### GET `/task/:uuid`

Get task status and run history.

**Response (200):**
```json
{
  "success": true,
  "task": {
    "uuid": "abc-123",
    "title": "[My App] New Activity",
    "status": "completed",
    "action_type": "SDK_TRIGGER",
    "source_app": "uuid",
    "error": null,
    "created_at": "2024-01-15T10:00:00Z",
    "updated_at": "2024-01-15T10:05:00Z"
  },
  "runs": [
    {
      "id": 1,
      "agent_name": "processor",
      "workspace_slug": "operations",
      "thread_slug": "general",
      "status": "completed",
      "started_at": "2024-01-15T10:01:00Z",
      "completed_at": "2024-01-15T10:05:00Z",
      "error": null
    }
  ]
}
```

---

### GET `/agents`

List available AI agents.

**Response (200):**
```json
{
  "success": true,
  "agents": [
    {
      "name": "order-processor",
      "display_name": "Order Processor",
      "description": "Processes incoming orders",
      "hub_id": null
    }
  ]
}
```

---

### GET `/workspaces`

List all workspaces.

**Response (200):**
```json
{
  "success": true,
  "workspaces": [
    {
      "id": 1,
      "slug": "operations",
      "name": "Operations",
      "type": "workspace",
      "created_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

---

### GET `/workspaces/:slug/threads`

List threads in a workspace.

**Response (200):**
```json
{
  "success": true,
  "workspace": {
    "id": 1,
    "slug": "operations",
    "name": "Operations"
  },
  "threads": [
    {
      "id": 1,
      "slug": "general",
      "name": "General",
      "created_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

---

## Activities Endpoints (via Proxy)

These endpoints proxy to the Main App which handles Supabase operations. No direct database access is needed.

### POST `/activities`

Create a new activity.

**Request Headers:**
- `X-App-Id`: Your Local App UUID (required)

**Request Body:**
```json
{
  "raw_data": { "type": "order", "amount": 100 }
}
```

**Response (201):**
```json
{
  "data": {
    "id": "activity-uuid",
    "raw_data": { "type": "order", "amount": 100 },
    "status": "pending",
    "created_at": "2024-01-15T10:00:00Z"
  }
}
```

---

### GET `/activities`

List activities with filters.

**Request Headers:**
- `X-App-Id`: Your Local App UUID (required)

**Query Parameters:**
| Parameter | Type | Description |
|-----------|------|-------------|
| `status` | string | Filter by status (pending, claimed, completed, failed) |
| `limit` | number | Max results (default: 50) |
| `offset` | number | Pagination offset |

---

### PATCH `/activities/:id`

Update an activity status or result.

**Request Body:**
```json
{
  "status": "processed",
  "result": { "summary": "Order processed" }
}
```

---

### DELETE `/activities/:id`

Delete an activity.
