---
title: "REST API Reference"
description: "Public REST API documentation for RealTimeX Local Apps"
---

import { Callout } from 'nextra/components'

# REST API Reference

RealTimeX provides a set of public REST API endpoints for building custom integrations when an official SDK is not available or not suitable for your environment.

Base URL: `http://localhost:3001/`

## Authentication (v1.0.8+)

RealTimeX SDK supports two modes of authentication: **Production Mode** (App ID) and **Developer Mode** (API Key).

### 1. Production Mode (App ID)
Default mode used when your application is running within the RealTimeX ecosystem. It uses the `x-app-id` header to identify your app and verify specific manifest-based permissions.

**Required Header:**
```http
X-App-Id: your-local-app-uuid
```

<Callout type="info">
The `x-app-id` is automatically injected via the `RTX_APP_ID` environment variable when RealTimeX starts your application.
</Callout>

### 2. Developer Mode (API Key)
Recommended for local development and testing. It uses a standard Bearer token to grant full access to all SDK features without requiring upfront app registration or manifest configuration.

**Required Header:**
```http
Authorization: Bearer your-api-key
```

<Callout type="tip">
**How to generate an API Key:**
1. Open RealTimeX Desktop
2. Go to **Settings** → **Tool** → **Developer API**
3. Click **Generate New API Key**
</Callout>

### Error Responses

**Missing Header (401):**
```json
{
  "success": false,
  "error": "Missing required header: x-app-id",
  "code": "MISSING_APP_ID"
}
```

**Invalid App ID (401):**
```json
{
  "success": false,
  "error": "Invalid app ID: <app-id>",
  "code": "INVALID_APP_ID"
}
```

---

## Permissions

Each API endpoint requires specific permissions. Permissions are declared in the SDK manifest and requested from the user.

### Permission States
1.  **Upfront Prompt**: The SDK declares needed permissions in the constructor. RealTimeX prompts for all missing permissions on app launch.
2.  **Runtime Prompt**: If an API is called without a pre-granted permission, the SDK triggers a native dialog and retries the call automatically.

| Permission | Required For |
|------------|-------------|
| `api.agents` | `GET /agents` |
| `api.workspaces` | `GET /workspaces` |
| `api.threads` | `GET /workspaces/:slug/threads` |
| `api.task` | `GET /task/:uuid` |
| `webhook.trigger` | `POST /webhooks/realtimex` |
| `activities.read` | `GET /activities` |
| `activities.write` | `POST /activities`, `PATCH /activities/:id`, `DELETE /activities/:id` |
| `llm.chat` | `POST /sdk/llm/chat`, `POST /sdk/llm/chat/stream` |
| `llm.embed` | `POST /sdk/llm/embed` |
| `llm.providers` | `GET /sdk/llm/providers`, `GET /sdk/llm/providers/chat`, `GET /sdk/llm/providers/embed` |
| `vectors.read` | `POST /sdk/llm/vectors/query` |

| `vectors.write` | `POST /sdk/llm/vectors/upsert`, `POST /sdk/llm/vectors/delete` |

---

## SDK Endpoints


These endpoints are used by the official SDKs to coordinate with the RealTimeX Main App.

### GET `/sdk/ping`

Connectivity and authentication check. Returns current mode and app context.

**Request Headers:**
- `x-app-id` OR `Authorization: Bearer <key>`

**Response (200):**
```json
{
  "success": true,
  "message": "pong",
  "mode": "development",
  "appId": "your-app-id-if-provided",
  "timestamp": "2024-01-15T10:00:00Z"
}
```

---

### POST `/webhooks/realtimex`

Unified webhook receiver for SDK. Supports multiple event types.

#### Event: `trigger-agent`

Create a calendar event and optionally trigger an agent.

**Request:**
```json
{
  "app_id": "uuid",
  "app_name": "My App",
  "event": "trigger-agent",
  "payload": {
    "raw_data": { "type": "order", "amount": 100 },
    "auto_run": true,
    "agent_name": "order-processor",
    "workspace_slug": "operations",
    "thread_slug": "general",
    "prompt": "Process this order"
  }
}
```

**Response (200):**
```json
{
  "success": true,
  "task_uuid": "abc-123",
  "calendar_event_uuid": "def-456",
  "auto_run": true,
  "message": "Agent triggered"
}
```

---

#### Event: `task-start`

Mark a task as processing. Used by agents before starting work.

**Request:**
```json
{
  "event": "task-start",
  "payload": {
    "task_uuid": "abc-123",
    "machine_id": "agent-001"
  }
}
```

**Response:** `{ "success": true, "status": "processing" }`

---

#### Event: `task-complete`

Mark a task as completed with result data.

**Request:**
```json
{
  "event": "task-complete",
  "payload": {
    "task_uuid": "abc-123",
    "machine_id": "agent-001",
    "result": { "summary": "Order processed", "data": {...} }
  }
}
```

**Response:** `{ "success": true, "status": "completed" }`

---

#### Event: `task-fail`

Mark a task as failed with error message.

**Request:**
```json
{
  "event": "task-fail",
  "payload": {
    "task_uuid": "abc-123",
    "machine_id": "agent-001",
    "error": "Connection timeout to external API"
  }
}
```

**Response:** `{ "success": true, "status": "failed" }`

---

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `app_id` | string | No | Local App UUID (from Main App) |
| `app_name` | string | No | Display name for calendar events |
| `event` | string | Yes | Event type (see above) |
| `payload` | object | Yes | Event-specific payload |


---

### GET `/task/:uuid`

Get task status and run history.

**Response (200):**
```json
{
  "success": true,
  "task": {
    "uuid": "abc-123",
    "title": "[My App] New Activity",
    "status": "completed",
    "action_type": "SDK_TRIGGER",
    "source_app": "uuid",
    "error": null,
    "created_at": "2024-01-15T10:00:00Z",
    "updated_at": "2024-01-15T10:05:00Z"
  },
  "runs": [
    {
      "id": 1,
      "agent_name": "processor",
      "workspace_slug": "operations",
      "thread_slug": "general",
      "status": "completed",
      "started_at": "2024-01-15T10:01:00Z",
      "completed_at": "2024-01-15T10:05:00Z",
      "error": null
    }
  ]
}
```

---

### GET `/agents`

List available AI agents.

**Response (200):**
```json
{
  "success": true,
  "agents": [
    {
      "name": "order-processor",
      "display_name": "Order Processor",
      "description": "Processes incoming orders",
      "hub_id": null
    }
  ]
}
```

---

### GET `/workspaces`

List all workspaces.

**Response (200):**
```json
{
  "success": true,
  "workspaces": [
    {
      "id": 1,
      "slug": "operations",
      "name": "Operations",
      "type": "workspace",
      "created_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

---

### GET `/workspaces/:slug/threads`

List threads in a workspace.

**Response (200):**
```json
{
  "success": true,
  "workspace": {
    "id": 1,
    "slug": "operations",
    "name": "Operations"
  },
  "threads": [
    {
      "id": 1,
      "slug": "general",
      "name": "General",
      "created_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

---

## Activities Endpoints (via Proxy)

These endpoints proxy to the Main App which handles Supabase operations. No direct database access is needed.

### POST `/activities`

Create a new activity.

**Request Headers:**
- `X-App-Id`: Your Local App UUID (required)

**Request Body:**
```json
{
  "raw_data": { "type": "order", "amount": 100 }
}
```

**Response (201):**
```json
{
  "data": {
    "id": "activity-uuid",
    "raw_data": { "type": "order", "amount": 100 },
    "status": "pending",
    "created_at": "2024-01-15T10:00:00Z"
  }
}
```

---

### GET `/activities`

List activities with filters.

**Request Headers:**
- `X-App-Id`: Your Local App UUID (required)

**Query Parameters:**
| Parameter | Type | Description |
|-----------|------|-------------|
| `status` | string | Filter by status (pending, claimed, completed, failed) |
| `limit` | number | Max results (default: 50) |
| `offset` | number | Pagination offset |

---

### PATCH `/activities/:id`

Update an activity status or result.

**Request Body:**
```json
{
  "status": "processed",
  "result": { "summary": "Order processed" }
}
```

---

### DELETE `/activities/:id`

Delete an activity.

---

## LLM Endpoints

Powerful AI capabilities including chat completion, streaming, and embeddings.

### POST `/sdk/llm/chat`

Synchronous chat completion from configured LLM providers.

**Request:**
```json
{
  "messages": [
    { "role": "system", "content": "You are a helpful assistant." },
    { "role": "user", "content": "Hello!" }
  ],
  "provider": "openai",
  "model": "gpt-4o",
  "temperature": 0.7
}
```

**Response (200):**
```json
{
  "success": true,
  "response": {
    "content": "Hello! How can I help you today?",
    "provider": "openai",
    "model": "gpt-4o",
    "metrics": {
      "prompt_tokens": 10,
      "completion_tokens": 8,
      "total_tokens": 18
    }
  }
}
```

---

### POST `/sdk/llm/chat/stream`

Streaming chat completion using Server-Sent Events (SSE).

**Request Headers:**
- `Accept: text/event-stream`

**Events:**
- `data`: JSON chunk containing `{ "textResponse": "...", "uuid": "..." }`
- `event: error`: Occurs if there's a runtime LLM error.
- `data: [DONE]`: End of stream.

---

### POST `/sdk/llm/embed`

Generate high-dimensional vectors for text inputs.

**Request:**
```json
{
  "input": ["Hello world", "Artificial Intelligence"],
  "provider": "realtimexai",
  "model": "text-embedding-ada-002"
}
```

**Response (200):**
```json
{
  "success": true,
  "embeddings": [[0.1, 0.2, ...], [0.3, 0.4, ...]],
  "dimensions": 1536,
  "provider": "realtimexai",
  "model": "text-embedding-ada-002"
}
```

---


### GET `/sdk/llm/providers/chat`

List only configured **Chat (LLM)** providers and their models.

**Response (200):**
```json
{
  "success": true,
  "providers": [
    {
      "provider": "openai",
      "models": [ { "id": "gpt-4o", "name": "gpt-4o" }, ... ],
      "active": true
    },
    {
      "provider": "anthropic",
      "models": [ { "id": "claude-3-5-sonnet", "name": "Claude 3.5 Sonnet" }, ... ],
      "active": false
    }
  ]
}
```

---

### GET `/sdk/llm/providers/embed`

List only configured **Embedding** providers and their models.

**Response (200):**
```json
{
  "success": true,
  "providers": [
    {
      "provider": "openai",
      "models": [ { "id": "text-embedding-3-small", "name": "text-embedding-3-small" } ],
      "active": false
    },
    {
      "provider": "native",
      "models": [ { "id": "all-MiniLM-L6-v2", "name": "all-MiniLM-L6-v2" } ],
      "active": true
    }
  ]
}
```

---


## Vector Store Endpoints

Store and query vectors for Retrieval-Augmented Generation (RAG).

### POST `/sdk/llm/vectors/upsert`

Store vectors with metadata into the managed LanceDB/Vector storage.

**Request:**
```json
{
  "vectors": [
    {
      "id": "doc-1-chunk-1",
      "vector": [0.1, 0.2, ...],
      "metadata": { "text": "...", "documentId": "doc-1" }
    }
  ],
  "workspaceId": "knowledge-base"
}
```

---

### POST `/sdk/llm/vectors/query`

Perform semantic similarity search.

**Request:**
```json
{
  "vector": [0.1, 0.2, ...],
  "topK": 5,
  "workspaceId": "knowledge-base",
  "filter": { "documentId": "doc-1" }
}
```

> [!TIP]
> **Isolation & Filtering:**
> - **`workspaceId`**: Use this for top-level data isolation. It creates separate namespaces in the vector database (physical isolation).
> - **`documentId`**: Use this as a metadata tag for filtering results *within* a workspace. Filtering is applied after similarity search (post-filter).

---

### POST `/sdk/llm/vectors/delete`

Delete vectors from storage. Currently supports `deleteAll: true`.

**Request:**
```json
{
  "deleteAll": true,
  "workspaceId": "knowledge-base"
}
```

### GET `/sdk/llm/vectors/workspaces`

List all namespaces/workspaces storage for this app

**Response**
```json
{
  "success":true,
  "workspaces":["default","testws","ws1"]
}
```